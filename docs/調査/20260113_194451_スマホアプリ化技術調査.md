# スマホアプリ化（ネイティブ展開）に関する技術調査レポート

**作成日**: 2026-01-13
**対象**: Gocha Rumble 3D (React + Vite + Three.js)

---

## 1. 結論：アプリ化は「容易」かつ「推奨」

「最初はWebブラウザでリリースし、後からiOS/Androidアプリとしてストアに出す」という戦略は、技術的に非常にスムーズに移行可能です。**作り直す必要はありません。**

### 1.1 なぜ容易なのか？
現代のアプリ開発では、Web技術（React）をそのままアプリとしてパッケージングする**「Capacitor (キャパシター)」**というツールが標準的になっているためです。

*   **Capacitor**: Ionicチームが開発。Reactプロジェクトに後付けで導入でき、`npm run build` したWebアセットをそのままiOS/Androidプロジェクトに変換してくれます。

---

## 2. アプリ化のメリット・デメリット

### 2.1 メリット
1.  **プッシュ通知**: 「放置が完了しました」「レア敵が出現！」などの通知を送れるため、リテンション（継続率）が劇的に向上する。
2.  **ホーム画面常駐**: アイコンがホームにあるだけで起動率が上がる。
3.  **App Store / Google Playからの流入**: Web検索以外の巨大な集客チャネルが得られる。
4.  **AdMobが使える**: Web用AdSenseより単価の高い、アプリ専用広告SDK（AdMob）が使える。

### 2.2 デメリット（コスト）
1.  **Apple/Google税**: アプリ内課金（IAP）をする場合、売上の15〜30%を手数料として取られる（WebならStripe等で3.6%程度）。
2.  **審査**: ストアの審査（特にApple）はWebより厳しい。
3.  **開発機材**: iOSビルドにはMacが必要。

---

## 3. アプリ化に向けた技術的準備

Web版を開発する現段階から、以下の点だけ意識しておけば、後でスムーズにアプリ化できます。

### 3.1 「セーフエリア」の確保（重要）
最近のスマホ（iPhoneなど）は画面上部に「ノッチ（切り欠き）」があり、下部に「ホームバー」があります。
*   **Web版での対策**: CSSで `padding-top: env(safe-area-inset-top);` などを設定しておく。これをやっておけば、アプリ化した時もUIが隠れません。

### 3.2 広告SDKの抽象化
Webとアプリでは使う広告サービスが違います。
*   **Web**: Google AdSense
*   **App**: Google AdMob (またはAppLovin等)

コード内で `showAd()` という関数を作っておき、中身を環境によって分岐させる設計にしておきましょう。

```typescript
// 広告表示ロジックのイメージ
const showRewardAd = async () => {
  if (isNativeApp()) {
    // AdMob (アプリ用) を表示
    await AdMob.showRewardVideo();
  } else {
    // AdSense (Web用) を表示
    // ※またはH5広告
    window.adsbygoogle.push({...}); 
  }
};
```

### 3.3 データの同期（Firebase Auth）
Web版で遊んでいたユーザーがアプリ版に移行した時、データが引き継げるように「Googleログイン」などのID連携を必須にしておくとスムーズです（匿名ログインだと引き継ぎが面倒）。

---

## 4. 推奨ロードマップ（改訂案）

1.  **フェーズ1 (Web版)**:
    *   PC/スマホブラウザ向けにリリース。
    *   集客はSNSとSEO。
    *   収益はAdSense。
    *   **★ここでゲームバランスを完成させる。**

2.  **フェーズ2 (アプリ化)**:
    *   `Capacitor` を導入し、iOS/Androidプロジェクトを生成。
    *   広告をAdMobに差し替え。
    *   プッシュ通知機能を実装。
    *   ストア審査 → リリース。

3.  **フェーズ3 (クロス展開)**:
    *   Web版とアプリ版のデータ連携（外出先はスマホアプリ、家ではPC大画面でWeb版）。

---

## 5. プロデューサーへのメッセージ

**「後からアプリ化」は完全にアリです。**
むしろ、審査やストア手数料のリスクがないWeb版でPMF（市場適合）を確認してから、コストをかけてアプリ化する流れは、スタートアップとして最も賢い戦略です。

今の仕様書（v3.0）のまま進めても、将来のアプリ化の足枷になるような要素はありません。安心してください。
