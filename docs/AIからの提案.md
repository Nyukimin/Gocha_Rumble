# AIからの提案: Gocha Rumble 3D

ユーザー様のリクエスト（ゴチャキャラ・放置・ハクスラ・PvP）を実現するための、技術的・ゲームデザイン的な提案をまとめました。

## 1. コア技術: 「数千体を動かす」ために
ブラウザ上で数千体の3Dキャラクターを快適に動かすため、以下の技術選定を提案します。

- **Three.js + InstancedMesh**:
  - 通常の3Dモデル（SkinnedMesh）を数千体動かすとPCでも重くなります。
  - 今回は **InstancedMesh（インスタンス化メッシュ）** という技術を使い、1回の描画命令で大量のキャラを描画します。
  - **制約**: 複雑な骨格アニメーション（手足を曲げる等）は難しいです。
  - **解決策**: 跳ねる、伸縮する、回転する、といった「物理的な挙動」でかわいさを表現します。

## 2. ゲームデザイン案

### キャラクタービジュアル
- **「ミニマル × カワイイ」**:
  - カプセル型やスライム型のような単純な形状。
  - 色使い（パステルカラー等）や、小さな「目」のテクスチャでキャラクター性を出します。
  - 装備品も「頭に箱を乗せる」「剣を浮遊させる」など、ボーン変形が不要な形で実装します。

### バトルシステム: 「わちゃわちゃ物理バトル」
- 敵味方が入り乱れる「押し合い」を物理計算（シンプルな半径チェック）で行います。
- 攻撃はオート。範囲内に敵がいればポコポコ殴る。
- 画面を埋め尽くすダメージ数字（ポップアップ）で、ハクスラ特有の「強くなってる感」を演出します。

### 非同期PvP (ゴーストバトル)
- リアルタイム通信の対戦は実装難易度が高く、放置ゲームとの相性も悪いです。
- 代わりに **「非同期PvP」** を提案します。
  1. プレイヤーが「防衛チーム」を登録（サーバーにデータを保存）。
  2. 他のプレイヤーは、そのデータをダウンロードして自分のPC上で対戦を行う。
  3. これなら「サーバー負荷」も低く、いつでも誰とでも戦えます。

## 3. インフラ・バックエンド
- **Google認証 & データベース**: **Firebase** を使用。
  - 認証機能の実装コストがほぼゼロになります。
  - Firestore（データベース）は、JSONデータをそのまま保存できるため、キャラのパラメータ保存に最適です。

## 4. 開発ロードマップ案
1. **フェーズ1: 描画実験** (InstancedMeshで1000体表示テスト)
2. **フェーズ2: ゲームループ** (移動、攻撃、HPの減少)
3. **フェーズ3: ゲームサイクル** (リザルト、パラメータ強化UI)
4. **フェーズ4: オンライン要素** (Firebase連携、ランキング)

---

## 5. ヘビーゲーマー向け追加提案

現在のリクエストは「放置して眺める」楽しさに焦点を当てていますが、長期的なリプレイ価値と戦略性を高めるために、以下の追加要素を提案します。

### 5.1 メタプログレッション（バトル間の成長システム）

**問題点**: バトル間の成長要素が未決定のため、長期的な目標がない

**提案**:
- **ユニットコレクションシステム**
  - バトルで獲得した報酬で新しいユニットタイプをアンロック
  - レアリティシステム（コモン、レア、エピック、レジェンド）
  - 各ユニットタイプに複数のバリエーション（見た目・ステータスの微調整）

- **永続的な強化システム**
  - **ユニットレベル**: バトルで使用したユニットが経験値を獲得し、レベルアップ
  - **マスターレベル**: 特定のユニットタイプを何度も使用すると、そのタイプ全体が強化される
  - **装備コレクション**: バトル中に獲得した装備を永続的に保持し、次回のバトルで装備可能

- **通貨・リソースシステム**
  - **コイン**: バトル報酬で獲得、ユニットの強化・購入に使用
  - **メモリチップ**: ユニットの進化に使用（レアリティが高いほど必要数が多い）
  - **研究ポイント**: 新しいユニットタイプや装備のアンロックに使用

### 5.2 戦略性・深みの追加

**問題点**: セットアップ後の放置だけでは、戦略的な楽しみが少ない

**提案**:
- **陣形システムの強化**
  - 複数の陣形パターン（前衛重視、後衛重視、バランス型など）
  - 陣形ごとにステータス補正（例：前衛型は防御力+10%、後衛型は攻撃力+10%）
  - 敵の出現パターンに応じた陣形の最適化が重要に

- **ユニット相性システム**
  - タイプ相性（近距離型 > 遠距離型 > 防御型 > 近距離型の循環）
  - 相性によるダメージ倍率（有利: 1.5倍、不利: 0.75倍）
  - 敵のタイプ構成を予測してチーム編成を最適化する戦略性

- **スキル・特殊能力システム**
  - 各ユニットタイプに固有のスキル（例：近距離型は「突進」、遠距離型は「連射」、防御型は「シールド」）
  - スキルの発動条件（一定時間経過、敵を一定数倒す、HPが一定以下など）
  - スキルの組み合わせで戦略の幅が広がる

### 5.3 リプレイ価値の向上

**問題点**: 同じバトルを繰り返すだけでは飽きる

**提案**:
- **ミッション・チャレンジシステム**
  - **日替わりミッション**: 毎日異なる目標（例：「遠距離型のみで100体撃破」「5分以内に生存」）
  - **週間チャレンジ**: より難易度の高い目標（例：「ボスを10体撃破」「無傷で10分生存」）
  - **報酬**: レア装備、ユニット、通貨など

- **難易度選択の拡張**
  - **通常モード**: 基本のサバイバル
  - **ハードモード**: 敵が強く、報酬も多い
  - **エクストリームモード**: 非常に難しいが、レア報酬が確実に獲得できる
  - **カスタムモード**: プレイヤーが敵の出現頻度や強さを調整可能

- **シーズンシステム**
  - 定期的（月1回など）にシーズンがリセット
  - シーズンごとに新しいユニットタイプや装備が追加
  - シーズンランキングで特別報酬を獲得

### 5.4 エンドゲームコンテンツ

**問題点**: 長期的な目標がない

**提案**:
- **エンドレスモード**
  - 制限時間なしで、どこまで生存できるか挑戦
  - 難易度が無限に上昇していく
  - 到達ウェーブ数に応じた特別報酬

- **タイムアタックモード**
  - 制限時間内にどれだけ多くの敵を倒せるか
  - リーダーボードで競う
  - 週間ランキングで報酬獲得

- **コレクション要素の強化**
  - **図鑑システム**: 獲得したユニット、装備、敵の情報を記録
  - **実績システム**: 様々な条件を達成すると実績を獲得（例：「100回バトル勝利」「全ユニットタイプ獲得」）
  - **カスタマイズ要素**: ユニットの色やパーツをカスタマイズ（見た目のみ、ゲーム性には影響しない）

### 5.5 コミュニティ要素

**問題点**: PvP以外の交流要素がない

**提案**:
- **チーム共有システム**
  - 自分の編成したチームを他のプレイヤーと共有
  - 共有されたチームを使用すると、作成者に報酬が入る
  - 人気のチーム編成がランキングで表示される

- **ギルド・クランシステム**（将来的な拡張）
  - プレイヤーがグループを結成
  - ギルド内でランキングや報酬を共有
  - ギルド対戦イベント

### 5.6 バランス調整の余地

**問題点**: メタが固定化する可能性

**提案**:
- **定期的なバランスパッチ**
  - ユニットのステータスやスキルの調整
  - 新ユニットタイプの追加
  - 装備の効果調整

- **メタシフトの仕組み**
  - シーズンごとに強力なユニットタイプが変わる
  - プレイヤーが新しい戦略を考える必要がある

---

## 6. 実装優先度

### 高優先度（コアゲームループに必須）
1. メタプログレッション（ユニットコレクション、永続的強化）
2. 通貨・リソースシステム
3. 陣形システムの強化

### 中優先度（リプレイ価値向上）
4. ミッション・チャレンジシステム
5. 難易度選択の拡張
6. スキル・特殊能力システム

### 低優先度（将来的な拡張）
7. エンドレスモード
8. タイムアタックモード
9. コミュニティ要素
10. シーズンシステム

---

## 7. ライトゲーマー視点での分析と提案

ライトゲーマーとして、現在の提案とリクエストを分析しました。ゲームの「わかりやすさ」と「魅力的なポイント」を整理します。

### 7.1 わかりにくい点・改善が必要な点

#### 7.1.1 システムの複雑さ

**問題点**: ヘビーゲーマー向け提案が複雑すぎる

- **ユニット相性システム**: 「近距離型 > 遠距離型 > 防御型 > 近距離型」という循環相性は、初心者には理解が難しい
  - **改善案**: 最初は相性を無効化し、慣れてきたら段階的に有効化する「相性システムの段階的解放」

- **複数の通貨・リソース**: コイン、メモリチップ、研究ポイントなど、複数の通貨があると混乱する
  - **改善案**: 最初は1種類の通貨（コイン）のみ。慣れてきたら他の通貨を追加

- **マスターレベル**: 「特定のユニットタイプを何度も使用すると強化される」という概念が分かりにくい
  - **改善案**: 「よく使うユニットが強くなる」という直感的な説明と、視覚的なフィードバック

#### 7.1.2 説明不足・理解しにくい概念

- **非同期PvP（ゴーストバトル）**: 「ゴースト」という言葉が分かりにくい
  - **改善案**: 「他のプレイヤーのチームと自動で対戦」という説明を追加。視覚的に「ゴースト」であることを明示（半透明表示など）

- **陣形システム**: ステータス補正（+10%など）の数値が多すぎる
  - **改善案**: 最初は「前衛型」「後衛型」「バランス型」の3種類のみ。補正値は視覚的に表示（アイコンで「攻撃↑」「防御↑」など）

- **スキル発動条件**: 「一定時間経過」「敵を一定数倒す」「HPが一定以下」など、条件が複雑
  - **改善案**: 最初は「自動で発動」のみ。慣れてきたら条件を表示

#### 7.1.3 UI・UXの課題

- **情報過多**: リザルト画面に表示される情報が多すぎる可能性
  - **改善案**: 重要な情報（生存時間、撃破数、獲得報酬）を大きく表示。詳細は「詳細を見る」ボタンで表示

- **チュートリアルの不足**: ゲームの始め方が分からない
  - **改善案**: 最初の1回だけ、簡単なチュートリアルを表示（「ここをクリックしてチームを編成」「バトル開始」など）

### 7.2 魅力的なポイント（これは良い！）

#### 7.2.1 コアコンセプト

- **「見守る」楽しさ**: これは非常に良い！放置ゲームの本質を捉えている
  - セットアップ後は何もしなくて良いので、ライトゲーマーにも優しい
  - カメラ操作で自由に眺められるのは、視覚的な楽しさを高める

- **かわいいメカデザイン**: 視覚的に魅力的
  - SDガンダム的な硬い動きも、メカらしさがあって良い
  - パステルカラーは優しい印象で、ライトゲーマーにも受け入れられやすい

#### 7.2.2 ゲームシステム

- **ダメージ数値のポップアップ**: ハクスラ感があって良い
  - 数値が飛び散る演出は、視覚的に分かりやすく、達成感がある
  - 「強くなってる感」を直感的に感じられる

- **シンプルなゲームループ**: セットアップ → バトル → リザルトの流れが分かりやすい
  - 複雑な操作が不要で、ライトゲーマーにも優しい

- **リアルタイム進化**: バトル中にユニットが進化するのは、視覚的に面白い
  - 「敵を倒すと強くなる」という直感的なシステム

#### 7.2.3 技術的な魅力

- **200体の同時表示**: 画面がにぎやかで、見ていて楽しい
  - 「ゴチャキャラ」感が実現できている

### 7.3 ライトゲーマー向け追加提案

#### 7.3.1 オート機能の充実

- **オート編成**: 最適なチーム編成を自動で提案
  - 初心者は「おすすめ編成」ボタンを押すだけで開始できる

- **オート装備**: 獲得した装備を自動で最適なユニットに装備
  - 手動で装備を選ぶのが面倒な人向け

#### 7.3.2 視覚的なフィードバックの強化

- **進化の演出**: ユニットが進化する際の派手な演出
  - 光る、大きくなる、パーツが変わるなど、視覚的に分かりやすく

- **達成感の演出**: ミッション達成時、レベルアップ時の演出
  - パーティクルエフェクト、音效などで「達成した！」感を高める

#### 7.3.3 シンプルな説明・ガイド

- **ツールチップ**: 各要素にマウスオーバーで説明を表示
  - 「このユニットは何ができるの？」「この装備は何に使うの？」など

- **初心者向けモード**: 最初の数回のバトルは、説明が表示される
  - 「敵を倒すと進化ポイントが貯まります」「進化ポイントが満タンになると進化します」など

#### 7.3.4 失敗のハードルを下げる

- **リトライ機能**: すぐに再挑戦できる
  - リザルト画面から「もう一度」ボタンで即座に再開

- **難易度の段階的解放**: 最初は「イージー」のみ。慣れてきたら「ノーマル」「ハード」を解放
  - いきなり難しいモードを選べないようにする

#### 7.3.5 コレクション要素の視覚化

- **図鑑の充実**: 獲得したユニットや装備を、見た目で確認できる
  - 3Dモデルを回転させて見られる
  - 「このユニット、かわいい！」という感情的なつながりを生む

- **コレクション達成度**: 「あと3体で全ユニット獲得！」など、目標が分かりやすい

### 7.4 ライトゲーマー向けの実装優先度

#### 高優先度（ライトゲーマーに必須）
1. チュートリアル・ガイドシステム
2. オート編成・オート装備機能
3. 視覚的なフィードバックの強化（進化演出、達成演出）
4. シンプルな説明（ツールチップ、初心者向けモード）

#### 中優先度（体験向上）
5. リトライ機能
6. 難易度の段階的解放
7. 図鑑の充実

#### 低優先度（将来的な拡張）
8. コレクション達成度の表示
9. その他のQOL機能

---

## 8. まとめ：ライトゲーマーとヘビーゲーマーの両立

### 8.1 段階的な複雑さの解放

- **初心者**: シンプルなシステムのみ（オート機能、簡単な説明）
- **中級者**: 一部のシステムを解放（陣形、相性など）
- **上級者**: すべてのシステムを利用可能（カスタムモード、エンドレスモードなど）

### 8.2 視覚的なわかりやすさ

- 数値よりも視覚的なフィードバックを重視
- 「強くなってる感」を視覚的に表現
- 複雑なシステムも、視覚的に分かりやすく

### 8.3 失敗のハードルを下げる

- すぐにリトライできる
- 失敗しても報酬は少しもらえる
- 難易度を段階的に上げられる

---

## 9. 参照：リテンション戦略仕様

プロデューサー視点でのチャレンジ人口の拡大と継続人口の増加に関する詳細な仕様は、別ファイルに記載しています。

**参照**: `docs/仕様/20260112_232854_リテンション戦略仕様.md`